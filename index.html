<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LA Chargers 2026 Cap Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0080C6 0%, #FFC20E 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1750px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        h1 {
            color: #0080C6;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 1.2em;
        }

        .cap-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .cap-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .cap-card h3 {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .cap-card .value {
            font-size: 2em;
            font-weight: bold;
            color: #0080C6;
        }

        .cap-card.positive .value {
            color: #28a745;
        }

        .cap-card.negative .value {
            color: #dc3545;
        }

        .section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
        }

        .section h2 {
            color: #0080C6;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #FFC20E;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th {
            background: #0080C6;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .cut-candidate {
            background: #fff3cd;
        }

        .cut-candidate:hover {
            background: #ffeaa7;
        }

        .savings {
            color: #28a745;
            font-weight: bold;
        }

        .dead-cap {
            color: #dc3545;
            font-weight: bold;
        }

        .total-row {
            background: #0080C6;
            color: white;
            font-weight: bold;
            font-size: 1.1em;
        }

        .total-row td {
            border-bottom: none;
        }

        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: 10px;
        }

        .badge.active {
            background: #28a745;
            color: white;
        }

        .badge.cut {
            background: #dc3545;
            color: white;
        }

        .impact-section {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
        }

        .impact-section h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .impact-value {
            font-size: 3em;
            font-weight: bold;
            margin: 10px 0;
        }

        /* Depth Chart Styles */
        .depth-chart-container {
            margin-top: 20px;
        }

        .unit-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .unit-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 20px;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            color: white;
        }

        .offense-title {
            background: linear-gradient(135deg, #0080C6 0%, #0099E6 100%);
        }

        .defense-title {
            background: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%);
        }

        .st-title {
            background: linear-gradient(135deg, #FFC20E 0%, #FFD54F 100%);
            color: #333;
        }

        .positions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .formation-field {
            display: flex;
            flex-direction: column;
            gap: 20px;
            padding: 30px;
            background: #1a4d2e;
            border-radius: 10px;
            position: relative;
            min-height: 600px;
        }

        .depth-chart-wrapper {
            display: flex;
            gap: 30px;
        }

        .formations-container {
            flex: 1;
        }

        .player-pool {
            width: 450px;
            min-width: 450px;
            background: white;
            border-radius: 10px;
            padding: 25px;
            max-height: 1600px;
            overflow-y: auto;
            position: sticky;
            top: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        }

        .player-pool::-webkit-scrollbar {
            width: 8px;
        }

        .player-pool::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .player-pool::-webkit-scrollbar-thumb {
            background: #0080C6;
            border-radius: 10px;
        }

        .player-pool::-webkit-scrollbar-thumb:hover {
            background: #0099E6;
        }

        .player-pool h3 {
            color: #0080C6;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #FFC20E;
            position: sticky;
            top: -20px;
            background: white;
            z-index: 10;
            margin-top: -20px;
            padding-top: 20px;
        }

        .player-pool-category {
            margin-bottom: 20px;
        }

        .player-pool-category h4 {
            color: #666;
            font-size: 0.85em;
            margin-bottom: 8px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .formation-row {
            display: flex;
            justify-content: center;
            gap: 10px;
            align-items: flex-start;
        }

        .formation-position {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 80px;
        }

        .position-group {
            background: white;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .position-label {
            font-weight: bold;
            font-size: 0.9em;
            color: #0080C6;
            margin-bottom: 8px;
            padding: 5px;
            background: #e3f2fd;
            border-radius: 4px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .position-group .player-slots {
            min-height: 55px;
            padding: 5px;
            border-radius: 5px;
            transition: background 0.2s;
        }

        .player-card {
            background: linear-gradient(135deg, #0080C6 0%, #0099E6 100%);
            color: white;
            padding: 10px;
            margin-bottom: 5px;
            border-radius: 5px;
            cursor: move;
            transition: all 0.2s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            width: 100%;
            min-height: 55px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-sizing: border-box;
            overflow: hidden;
            min-width: 0;
        }

        .player-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .player-card.cut-player {
            border: 3px solid #dc3545;
            background: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%);
        }

        .player-name {
            font-weight: bold;
            font-size: 0.85em;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .player-cap {
            font-size: 0.75em;
            opacity: 0.9;
        }

        .player-team {
            font-size: 0.7em;
            opacity: 0.8;
            font-style: italic;
        }

        .fa-card {
            background: linear-gradient(135deg, #6c757d 0%, #868e96 100%);
            cursor: pointer;
            min-width: 0;
        }

        .fa-card.contract-set {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            cursor: move;
        }

        .fa-card:not(.contract-set) {
            opacity: 0.85;
        }

        .fa-grid .fa-card {
            min-width: 160px;
            width: 100%;
        }

        .fa-grid .player-name {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
            font-size: 0.9em;
        }

        .fa-grid .player-team {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 0.75em;
        }

        .fa-grid .player-cap {
            font-size: 0.7em;
        }

        .fa-tab:hover {
            opacity: 0.9;
        }

        .fa-tab.active {
            background: #0080C6 !important;
            color: white !important;
        }

        .formation-position {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 130px;
            max-width: 130px;
        }

        .player-slots {
            min-height: 55px;
            padding: 3px;
            border-radius: 5px;
            transition: background 0.2s;
            width: 100%;
        }

        button:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            table {
                font-size: 0.9em;
            }

            th, td {
                padding: 10px;
            }

            .positions-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 10px;
            }

            .player-card {
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚ö° LA Chargers 2026 Salary Cap Dashboard</h1>
            <p class="subtitle">Free Agency Analysis & Cut Candidates</p>
        </header>

        <div class="cap-overview">
            <div class="cap-card">
                <h3>Current Cap Hit</h3>
                <div class="value negative">$218.4M</div>
            </div>
            <div class="cap-card">
                <h3>Current Cap Space</h3>
                <div class="value positive">$80.6M</div>
            </div>
            <div class="cap-card">
                <h3>Active Roster</h3>
                <div class="value">51 Players</div>
            </div>
        </div>

        <div class="section">
            <h2>üéØ Identified Cut Candidates</h2>
            <p style="margin-bottom: 20px; color: #666;">Analysis of potential cap savings from cutting Mekhi Becton, Bradley Bozeman, Bud Dupree, and Will Dissly</p>

            <table>
                <thead>
                    <tr>
                        <th>Player</th>
                        <th>Position</th>
                        <th>2026 Cap Hit</th>
                        <th>Dead Money</th>
                        <th>Cap Savings</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="cut-candidate">
                        <td><strong>Mekhi Becton</strong></td>
                        <td>OL</td>
                        <td>$12,200,000</td>
                        <td class="dead-cap">$2,500,000</td>
                        <td class="savings">$9,700,000</td>
                        <td><span class="badge cut">CUT CANDIDATE</span></td>
                    </tr>
                    <tr class="cut-candidate">
                        <td><strong>Bradley Bozeman</strong></td>
                        <td>C</td>
                        <td>$6,935,000</td>
                        <td class="dead-cap">$1,060,000</td>
                        <td class="savings">$5,875,000</td>
                        <td><span class="badge cut">CUT CANDIDATE</span></td>
                    </tr>
                    <tr class="cut-candidate">
                        <td><strong>Will Dissly</strong></td>
                        <td>TE</td>
                        <td>$5,500,000</td>
                        <td class="dead-cap">$1,500,000</td>
                        <td class="savings">$4,000,000</td>
                        <td><span class="badge cut">CUT CANDIDATE</span></td>
                    </tr>
                    <tr class="cut-candidate">
                        <td><strong>Bud Dupree</strong></td>
                        <td>EDGE</td>
                        <td>$3,740,000</td>
                        <td class="dead-cap">$250,000</td>
                        <td class="savings">$3,490,000</td>
                        <td><span class="badge cut">CUT CANDIDATE</span></td>
                    </tr>
                    <tr class="total-row">
                        <td colspan="2"><strong>TOTAL IF ALL CUT</strong></td>
                        <td>$28,375,000</td>
                        <td>$5,310,000</td>
                        <td>$23,065,000</td>
                        <td></td>
                    </tr>
                </tbody>
            </table>

            <div class="impact-section">
                <h3>üí∞ Total Cap Savings Impact</h3>
                <div class="impact-value">+$23,065,000</div>
                <p style="font-size: 1.2em; margin-top: 10px;">
                    New Available Cap Space: <strong>$103,665,000</strong>
                </p>
                <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.9;">
                    Current Cap Space ($80.6M) + Savings from Cuts ($23.065M)
                </p>
                <p style="margin-top: 10px; font-size: 0.95em;">
                    üí° Cutting these players removes their salaries, increasing available cap space
                </p>
            </div>
        </div>

        <div class="section">
            <h2>üìä Key Active Roster Players (2026)</h2>
            <table>
                <thead>
                    <tr>
                        <th>Player</th>
                        <th>Position</th>
                        <th>2026 Cap Hit</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Justin Herbert</strong></td>
                        <td>QB</td>
                        <td>$46,300,000</td>
                        <td><span class="badge active">ACTIVE</span></td>
                    </tr>
                    <tr>
                        <td><strong>Derwin James</strong></td>
                        <td>S</td>
                        <td>$24,600,000</td>
                        <td><span class="badge active">ACTIVE</span></td>
                    </tr>
                    <tr>
                        <td><strong>Rashawn Slater</strong></td>
                        <td>LT</td>
                        <td>$23,800,000</td>
                        <td><span class="badge active">ACTIVE</span></td>
                    </tr>
                    <tr>
                        <td><strong>Joe Alt</strong></td>
                        <td>OL</td>
                        <td>$9,000,000</td>
                        <td><span class="badge active">ACTIVE</span></td>
                    </tr>
                    <tr>
                        <td><strong>Donte Jackson</strong></td>
                        <td>CB</td>
                        <td>$8,500,000</td>
                        <td><span class="badge active">ACTIVE</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>üèà Interactive Depth Chart</h2>
            <p style="margin-bottom: 20px; color: #666;">Drag and drop players to reorganize positions and depth. Data from Over The Cap roster.</p>

            <!-- Dynamic Cap Tracker -->
            <div id="cap-tracker" style="display: flex; gap: 20px; margin-bottom: 25px; padding: 20px; background: linear-gradient(135deg, #0080C6 0%, #0099E6 100%); border-radius: 12px; color: white; align-items: center; justify-content: space-around; flex-wrap: wrap;">
                <div style="text-align: center;">
                    <div style="font-size: 0.85em; opacity: 0.9; margin-bottom: 5px;">BASE CAP SPACE</div>
                    <div style="font-size: 1.8em; font-weight: bold;">$80.6M</div>
                </div>
                <div style="font-size: 2em; opacity: 0.7;">+</div>
                <div style="text-align: center;">
                    <div style="font-size: 0.85em; opacity: 0.9; margin-bottom: 5px;">ROSTER CHANGES</div>
                    <div id="cap-adjustment" style="font-size: 1.8em; font-weight: bold;">$0.0M</div>
                </div>
                <div style="font-size: 2em; opacity: 0.7;">=</div>
                <div style="text-align: center; background: rgba(255,255,255,0.2); padding: 15px 25px; border-radius: 10px;">
                    <div style="font-size: 0.85em; opacity: 0.9; margin-bottom: 5px;">AVAILABLE CAP</div>
                    <div id="available-cap" style="font-size: 2.2em; font-weight: bold; color: #FFD700;">$80.6M</div>
                </div>
            </div>

            <div class="depth-chart-wrapper">
                <div class="formations-container">
                    <!-- OFFENSE -->
                    <div class="unit-section">
                    <h3 class="unit-title offense-title">OFFENSE</h3>
                    <div class="formation-field">
                        <!-- Front Row: WR3, TE, OL, WR1, WR2 -->
                        <div class="formation-row">
                            <div class="formation-position">
                                <div class="position-label">WR3</div>
                                <div class="player-slots" data-position="WR3">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Tre Harris</div>
                                        <div class="player-cap">$1.8M</div>
                                    </div>
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">KeAndre Lambert-Smith</div>
                                        <div class="player-cap">$1.1M</div>
                                    </div>
                                </div>
                            </div>

                            <div class="formation-position">
                                <div class="position-label">TE</div>
                                <div class="player-slots" data-position="TE">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Oronde Gadsden II</div>
                                        <div class="player-cap">$1.1M</div>
                                    </div>
                                    <div class="player-card cut-player" draggable="true" data-savings="4.0">
                                        <div class="player-name">Will Dissly</div>
                                        <div class="player-cap">$5.5M</div>
                                    </div>
                                </div>
                            </div>

                            <div class="formation-position">
                                <div class="position-label">LT</div>
                                <div class="player-slots" data-position="LT">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Rashawn Slater</div>
                                        <div class="player-cap">$23.8M</div>
                                    </div>
                                </div>
                            </div>

                            <div class="formation-position">
                                <div class="position-label">LG</div>
                                <div class="player-slots" data-position="LG">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Ben Cleveland</div>
                                        <div class="player-cap">$1.1M</div>
                                    </div>
                                </div>
                            </div>

                            <div class="formation-position">
                                <div class="position-label">C</div>
                                <div class="player-slots" data-position="C">
                                    <div class="player-card cut-player" draggable="true" data-savings="5.875">
                                        <div class="player-name">Bradley Bozeman</div>
                                        <div class="player-cap">$6.9M</div>
                                    </div>
                                </div>
                            </div>

                            <div class="formation-position">
                                <div class="position-label">RG</div>
                                <div class="player-slots" data-position="RG">
                                    <div class="player-card cut-player" draggable="true" data-savings="9.7">
                                        <div class="player-name">Mekhi Becton</div>
                                        <div class="player-cap">$12.2M</div>
                                    </div>
                                </div>
                            </div>

                            <div class="formation-position">
                                <div class="position-label">RT</div>
                                <div class="player-slots" data-position="RT">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Joe Alt</div>
                                        <div class="player-cap">$9.0M</div>
                                    </div>
                                </div>
                            </div>

                            <div class="formation-position">
                                <div class="position-label">WR1</div>
                                <div class="player-slots" data-position="WR1">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Ladd McConkey</div>
                                        <div class="player-cap">$2.8M</div>
                                    </div>
                                </div>
                            </div>

                            <div class="formation-position">
                                <div class="position-label">WR2</div>
                                <div class="player-slots" data-position="WR2">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Quentin Johnston</div>
                                        <div class="player-cap">$4.2M</div>
                                    </div>
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Derius Davis</div>
                                        <div class="player-cap">$1.3M</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Back Row: QB behind C, RB behind RG -->
                        <div class="formation-row">
                            <div style="min-width: 130px;"></div>
                            <div style="min-width: 130px;"></div>
                            <div style="min-width: 130px;"></div>
                            <div style="min-width: 130px;"></div>

                            <div class="formation-position">
                                <div class="position-label">QB</div>
                                <div class="player-slots" data-position="QB">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Justin Herbert</div>
                                        <div class="player-cap">$46.3M</div>
                                    </div>
                                </div>
                            </div>

                            <div class="formation-position">
                                <div class="position-label">RB</div>
                                <div class="player-slots" data-position="RB">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Omarion Hampton</div>
                                        <div class="player-cap">$4.0M</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Trailing spacers to center the row (for RT, WR1, WR2) -->
                            <div style="min-width: 130px;"></div>
                            <div style="min-width: 130px;"></div>
                            <div style="min-width: 130px;"></div>
                        </div>
                    </div>
                </div>

                <!-- DEFENSE -->
                <div class="unit-section">
                    <h3 class="unit-title defense-title">DEFENSE</h3>
                    <div class="formation-field">
                        <!-- Front Row: CB3, EDGE, DT, NT, EDGE, CB1, CB2 -->
                        <div class="formation-row">
                            <div class="formation-position">
                                <div class="position-label">CB3</div>
                                <div class="player-slots" data-position="CB3">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Derwin James</div>
                                        <div class="player-cap">$24.6M</div>
                                    </div>
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Nikko Reed</div>
                                        <div class="player-cap">$1.0M</div>
                                    </div>
                                </div>
                            </div>

                            <div class="formation-position">
                                <div class="position-label">EDGE</div>
                                <div class="player-slots" data-position="EDGE1">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Tuli Tuipulotu</div>
                                        <div class="player-cap">$6.1M</div>
                                    </div>
                                    <div class="player-card cut-player" draggable="true" data-savings="3.49">
                                        <div class="player-name">Bud Dupree</div>
                                        <div class="player-cap">$3.7M</div>
                                    </div>
                                </div>
                            </div>

                            <div class="formation-position">
                                <div class="position-label">DT</div>
                                <div class="player-slots" data-position="DT">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Justin Eboigbe</div>
                                        <div class="player-cap">$1.3M</div>
                                    </div>
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Scott Matlock</div>
                                        <div class="player-cap">$1.2M</div>
                                    </div>
                                </div>
                            </div>

                            <div class="formation-position">
                                <div class="position-label">NT</div>
                                <div class="player-slots" data-position="NT">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Jamaree Caldwell</div>
                                        <div class="player-cap">$1.4M</div>
                                    </div>
                                </div>
                            </div>

                            <div class="formation-position">
                                <div class="position-label">EDGE</div>
                                <div class="player-slots" data-position="EDGE2">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Kyle Kennard</div>
                                        <div class="player-cap">$1.2M</div>
                                    </div>
                                </div>
                            </div>

                            <div class="formation-position">
                                <div class="position-label">CB1</div>
                                <div class="player-slots" data-position="CB1">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Donte Jackson</div>
                                        <div class="player-cap">$8.5M</div>
                                    </div>
                                </div>
                            </div>

                            <div class="formation-position">
                                <div class="position-label">CB2</div>
                                <div class="player-slots" data-position="CB2">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Tarheeb Still</div>
                                        <div class="player-cap">$1.2M</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Second Row: LB1 behind left EDGE, LB2 behind right EDGE -->
                        <div class="formation-row">
                            <div style="min-width: 120px;"></div>

                            <div class="formation-position">
                                <div class="position-label">LB1</div>
                                <div class="player-slots" data-position="LB1">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Daiyan Henley</div>
                                        <div class="player-cap">$3.8M</div>
                                    </div>
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Junior Colson</div>
                                        <div class="player-cap">$1.6M</div>
                                    </div>
                                </div>
                            </div>

                            <div style="min-width: 120px;"></div>
                            <div style="min-width: 120px;"></div>

                            <div class="formation-position">
                                <div class="position-label">LB2</div>
                                <div class="player-slots" data-position="LB2">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Troy Dye</div>
                                        <div class="player-cap">$3.8M</div>
                                    </div>
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Marlowe Wax</div>
                                        <div class="player-cap">$1.0M</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Third Row: SS behind LB1, FS behind LB2 -->
                        <div class="formation-row">
                            <div style="min-width: 120px;"></div>

                            <div class="formation-position">
                                <div class="position-label">SS</div>
                                <div class="player-slots" data-position="SS">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">R.J. Mickens</div>
                                        <div class="player-cap">$1.0M</div>
                                    </div>
                                </div>
                            </div>

                            <div style="min-width: 120px;"></div>
                            <div style="min-width: 120px;"></div>

                            <div class="formation-position">
                                <div class="position-label">FS</div>
                                <div class="player-slots" data-position="FS">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Elijah Molden</div>
                                        <div class="player-cap">$7.9M</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Bench/Reserves Row -->
                        <div class="formation-row" style="margin-top: 20px;">
                            <div style="min-width: 120px;"></div>
                            <div class="formation-position">
                                <div class="position-label">Reserves</div>
                                <div class="player-slots" data-position="BENCH">
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Cam Hart</div>
                                        <div class="player-cap">$1.2M</div>
                                    </div>
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Jordan Oladokun</div>
                                        <div class="player-cap">$1.0M</div>
                                    </div>
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Peter Bowden</div>
                                        <div class="player-cap">$1.0M</div>
                                    </div>
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Tanner McLachlan</div>
                                        <div class="player-cap">$1.0M</div>
                                    </div>
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Eric Rogers</div>
                                        <div class="player-cap">$0.9M</div>
                                    </div>
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Savion Washington</div>
                                        <div class="player-cap">$0.9M</div>
                                    </div>
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Josh Fuga</div>
                                        <div class="player-cap">$0.9M</div>
                                    </div>
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Luke Grimm</div>
                                        <div class="player-cap">$0.9M</div>
                                    </div>
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">TeRah Edwards</div>
                                        <div class="player-cap">$0.9M</div>
                                    </div>
                                    <div class="player-card" draggable="true">
                                        <div class="player-name">Amar Johnson</div>
                                        <div class="player-cap">$0.9M</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SPECIAL TEAMS -->
                <div class="unit-section">
                    <h3 class="unit-title st-title">SPECIAL TEAMS</h3>
                    <div class="positions-grid">
                        <div class="position-group">
                            <div class="position-label">K</div>
                            <div class="player-slots" data-position="K">
                                <div class="player-card" draggable="true">
                                    <div class="player-name">Cameron Dicker</div>
                                    <div class="player-cap">$5.7M</div>
                                </div>
                            </div>
                        </div>

                        <div class="position-group">
                            <div class="position-label">P</div>
                            <div class="player-slots" data-position="P">
                                <div class="player-card" draggable="true">
                                    <div class="player-name">J.K. Scott</div>
                                    <div class="player-cap">$3.8M</div>
                                </div>
                            </div>
                        </div>

                        <div class="position-group">
                            <div class="position-label">ST</div>
                            <div class="player-slots" data-position="ST">
                                <div class="player-card" draggable="true">
                                    <div class="player-name">Emany Johnson</div>
                                    <div class="player-cap">$0.9M</div>
                                </div>
                                <div class="player-card" draggable="true">
                                    <div class="player-name">Josh Kaltenberger</div>
                                    <div class="player-cap">$0.9M</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>

                <!-- FREE AGENT POOL SIDEBAR -->
                <div class="player-pool" style="width: 450px;">
                    <h3>üèà 2026 Free Agent Pool</h3>
                    <p style="font-size: 0.8em; color: #666; margin-bottom: 10px;">Click to set contract, double-click green to edit</p>

                    <!-- Add Custom Player Button -->
                    <button id="add-custom-player-btn" style="width: 100%; padding: 10px; margin-bottom: 15px; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 0.9em; transition: opacity 0.2s;">
                        + Add Custom Player
                    </button>

                    <!-- Position Tabs -->
                    <div class="fa-tabs" style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 15px;">
                        <button class="fa-tab active" data-tab="TE" style="padding: 8px 12px; border: none; background: #0080C6; color: white; border-radius: 5px; cursor: pointer; font-weight: 600; font-size: 0.85em;">TE</button>
                        <button class="fa-tab" data-tab="LG" style="padding: 8px 12px; border: none; background: #e0e0e0; color: #333; border-radius: 5px; cursor: pointer; font-weight: 600; font-size: 0.85em;">LG</button>
                        <button class="fa-tab" data-tab="C" style="padding: 8px 12px; border: none; background: #e0e0e0; color: #333; border-radius: 5px; cursor: pointer; font-weight: 600; font-size: 0.85em;">C</button>
                        <button class="fa-tab" data-tab="RG" style="padding: 8px 12px; border: none; background: #e0e0e0; color: #333; border-radius: 5px; cursor: pointer; font-weight: 600; font-size: 0.85em;">RG</button>
                        <button class="fa-tab" data-tab="EDGE" style="padding: 8px 12px; border: none; background: #e0e0e0; color: #333; border-radius: 5px; cursor: pointer; font-weight: 600; font-size: 0.85em;">EDGE</button>
                        <button class="fa-tab" data-tab="IDL" style="padding: 8px 12px; border: none; background: #e0e0e0; color: #333; border-radius: 5px; cursor: pointer; font-weight: 600; font-size: 0.85em;">IDL</button>
                        <button class="fa-tab" data-tab="S" style="padding: 8px 12px; border: none; background: #e0e0e0; color: #333; border-radius: 5px; cursor: pointer; font-weight: 600; font-size: 0.85em;">S</button>
                    </div>

                    <!-- TE Tab Content -->
                    <div class="fa-tab-content active" data-tab-content="TE">
                        <div class="player-slots fa-grid" data-position="POOL-TE" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                            <div class="player-card fa-card" data-team="Browns" data-age="30"><div class="player-name">David Njoku</div><div class="player-team">Browns ‚Ä¢ 30</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Eagles" data-age="31"><div class="player-name">Dallas Goedert</div><div class="player-team">Eagles ‚Ä¢ 31</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Patriots" data-age="32"><div class="player-name">Austin Hooper</div><div class="player-team">Patriots ‚Ä¢ 32</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Saints" data-age="29"><div class="player-name">Foster Moreau</div><div class="player-team">Saints ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Broncos" data-age="29"><div class="player-name">Adam Trautman</div><div class="player-team">Broncos ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Bears" data-age="31"><div class="player-name">Durham Smythe</div><div class="player-team">Bears ‚Ä¢ 31</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Dolphins" data-age="34"><div class="player-name">Darren Waller</div><div class="player-team">Dolphins ‚Ä¢ 34</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Raiders" data-age="30"><div class="player-name">Ian Thomas</div><div class="player-team">Raiders ‚Ä¢ 30</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Buccaneers" data-age="27"><div class="player-name">Cade Otton</div><div class="player-team">Buccaneers ‚Ä¢ 27</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Titans" data-age="27"><div class="player-name">Chigoziem Okonkwo</div><div class="player-team">Titans ‚Ä¢ 27</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Giants" data-age="26"><div class="player-name">Daniel Bellinger</div><div class="player-team">Giants ‚Ä¢ 26</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Ravens" data-age="26"><div class="player-name">Isaiah Likely</div><div class="player-team">Ravens ‚Ä¢ 26</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Ravens" data-age="27"><div class="player-name">Charlie Kolar</div><div class="player-team">Ravens ‚Ä¢ 27</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Texans" data-age="28"><div class="player-name">Harrison Bryant</div><div class="player-team">Texans ‚Ä¢ 28</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Dolphins" data-age="26"><div class="player-name">Greg Dulcich</div><div class="player-team">Dolphins ‚Ä¢ 26</div><div class="player-cap">Click to set $</div></div>
                        </div>
                    </div>

                    <!-- LG Tab Content -->
                    <div class="fa-tab-content" data-tab-content="LG" style="display: none;">
                        <div class="player-slots fa-grid" data-position="POOL-LG" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                            <div class="player-card fa-card" data-team="Browns" data-age="35"><div class="player-name">Joel Bitonio</div><div class="player-team">Browns ‚Ä¢ 35</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Steelers" data-age="33"><div class="player-name">Isaac Seumalo</div><div class="player-team">Steelers ‚Ä¢ 33</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Jets" data-age="29"><div class="player-name">John Simpson</div><div class="player-team">Jets ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Chargers" data-age="27"><div class="player-name">Zion Johnson</div><div class="player-team">Chargers ‚Ä¢ 27</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Bills" data-age="29"><div class="player-name">David Edwards</div><div class="player-team">Bills ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Panthers" data-age="30"><div class="player-name">Brady Christensen</div><div class="player-team">Panthers ‚Ä¢ 30</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Bengals" data-age="28"><div class="player-name">Cordell Volson</div><div class="player-team">Bengals ‚Ä¢ 28</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Raiders" data-age="27"><div class="player-name">Dylan Parham</div><div class="player-team">Raiders ‚Ä¢ 27</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Bengals" data-age="31"><div class="player-name">Dalton Risner</div><div class="player-team">Bengals ‚Ä¢ 31</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Falcons" data-age="31"><div class="player-name">Elijah Wilkinson</div><div class="player-team">Falcons ‚Ä¢ 31</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Buccaneers" data-age="32"><div class="player-name">Dan Feeney</div><div class="player-team">Buccaneers ‚Ä¢ 32</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Giants" data-age="32"><div class="player-name">Aaron Stinnie</div><div class="player-team">Giants ‚Ä¢ 32</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Dolphins" data-age="28"><div class="player-name">Cole Strange</div><div class="player-team">Dolphins ‚Ä¢ 28</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Jets" data-age="27"><div class="player-name">Max Mitchell</div><div class="player-team">Jets ‚Ä¢ 27</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Buccaneers" data-age="28"><div class="player-name">Michael Jordan</div><div class="player-team">Buccaneers ‚Ä¢ 28</div><div class="player-cap">Click to set $</div></div>
                        </div>
                    </div>

                    <!-- C Tab Content -->
                    <div class="fa-tab-content" data-tab-content="C" style="display: none;">
                        <div class="player-slots fa-grid" data-position="POOL-C" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                            <div class="player-card fa-card" data-team="Bills" data-age="29"><div class="player-name">Connor McGovern</div><div class="player-team">Bills ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Browns" data-age="31"><div class="player-name">Ethan Pocic</div><div class="player-team">Browns ‚Ä¢ 31</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Panthers" data-age="27"><div class="player-name">Cade Mays</div><div class="player-team">Panthers ‚Ä¢ 27</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Ravens" data-age="26"><div class="player-name">Tyler Linderbaum</div><div class="player-team">Ravens ‚Ä¢ 26</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Dolphins" data-age="28"><div class="player-name">Liam Eichenberg</div><div class="player-team">Dolphins ‚Ä¢ 28</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Saints" data-age="28"><div class="player-name">Luke Fortner</div><div class="player-team">Saints ‚Ä¢ 28</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Saints" data-age="31"><div class="player-name">Will Clapp</div><div class="player-team">Saints ‚Ä¢ 31</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Giants" data-age="31"><div class="player-name">Austin Schlottmann</div><div class="player-team">Giants ‚Ä¢ 31</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Titans" data-age="32"><div class="player-name">Corey Levin</div><div class="player-team">Titans ‚Ä¢ 32</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Lions" data-age="28"><div class="player-name">Trystan Colon</div><div class="player-team">Lions ‚Ä¢ 28</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Chargers" data-age="29"><div class="player-name">Andre James</div><div class="player-team">Chargers ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Broncos" data-age="30"><div class="player-name">Sam Mustipher</div><div class="player-team">Broncos ‚Ä¢ 30</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="49ers" data-age="29"><div class="player-name">Matt Hennessy</div><div class="player-team">49ers ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Raiders" data-age="28"><div class="player-name">Jordan Meredith</div><div class="player-team">Raiders ‚Ä¢ 28</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Steelers" data-age="28"><div class="player-name">Ryan McCollum</div><div class="player-team">Steelers ‚Ä¢ 28</div><div class="player-cap">Click to set $</div></div>
                        </div>
                    </div>

                    <!-- RG Tab Content -->
                    <div class="fa-tab-content" data-tab-content="RG" style="display: none;">
                        <div class="player-slots fa-grid" data-position="POOL-RG" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                            <div class="player-card fa-card" data-team="Browns" data-age="32"><div class="player-name">Wyatt Teller</div><div class="player-team">Browns ‚Ä¢ 32</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Titans" data-age="36"><div class="player-name">Kevin Zeitler</div><div class="player-team">Titans ‚Ä¢ 36</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Seahawks" data-age="29"><div class="player-name">Josh Jones</div><div class="player-team">Seahawks ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Bears" data-age="29"><div class="player-name">Ryan Bates</div><div class="player-team">Bears ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Jets" data-age="27"><div class="player-name">Alijah Vera-Tucker</div><div class="player-team">Jets ‚Ä¢ 27</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Cowboys" data-age="27"><div class="player-name">Robert Jones</div><div class="player-team">Cowboys ‚Ä¢ 27</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Giants" data-age="36"><div class="player-name">Greg Van Roten</div><div class="player-team">Giants ‚Ä¢ 36</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Browns" data-age="28"><div class="player-name">Teven Jenkins</div><div class="player-team">Browns ‚Ä¢ 28</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Panthers" data-age="31"><div class="player-name">Austin Corbett</div><div class="player-team">Panthers ‚Ä¢ 31</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="49ers" data-age="26"><div class="player-name">Spencer Burford</div><div class="player-team">49ers ‚Ä¢ 26</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Bengals" data-age="33"><div class="player-name">Lucas Patrick</div><div class="player-team">Bengals ‚Ä¢ 33</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Cardinals" data-age="31"><div class="player-name">Will Hernandez</div><div class="player-team">Cardinals ‚Ä¢ 31</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Colts" data-age="30"><div class="player-name">Danny Pinter</div><div class="player-team">Colts ‚Ä¢ 30</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Texans" data-age="27"><div class="player-name">Ed Ingram</div><div class="player-team">Texans ‚Ä¢ 27</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Chargers" data-age="26"><div class="player-name">Jamaree Salyer</div><div class="player-team">Chargers ‚Ä¢ 26</div><div class="player-cap">Click to set $</div></div>
                        </div>
                    </div>

                    <!-- EDGE Tab Content -->
                    <div class="fa-tab-content" data-tab-content="EDGE" style="display: none;">
                        <div class="player-slots fa-grid" data-position="POOL-EDGE" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                            <div class="player-card fa-card" data-team="Bengals" data-age="32"><div class="player-name">Trey Hendrickson</div><div class="player-team">Bengals ‚Ä¢ 32</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Chargers" data-age="35"><div class="player-name">Khalil Mack</div><div class="player-team">Chargers ‚Ä¢ 35</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Buccaneers" data-age="32"><div class="player-name">Haason Reddick</div><div class="player-team">Buccaneers ‚Ä¢ 32</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Bills" data-age="31"><div class="player-name">Joey Bosa</div><div class="player-team">Bills ‚Ä¢ 31</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Raiders" data-age="28"><div class="player-name">Malcolm Koonce</div><div class="player-team">Raiders ‚Ä¢ 28</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Falcons" data-age="34"><div class="player-name">Leonard Floyd</div><div class="player-team">Falcons ‚Ä¢ 34</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="49ers" data-age="28"><div class="player-name">Yetur Gross-Matos</div><div class="player-team">49ers ‚Ä¢ 28</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Colts" data-age="31"><div class="player-name">Samson Ebukam</div><div class="player-team">Colts ‚Ä¢ 31</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Texans" data-age="36"><div class="player-name">Denico Autry</div><div class="player-team">Texans ‚Ä¢ 36</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Titans" data-age="30"><div class="player-name">Arden Key</div><div class="player-team">Titans ‚Ä¢ 30</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Bengals" data-age="26"><div class="player-name">Joseph Ossai</div><div class="player-team">Bengals ‚Ä¢ 26</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Panthers" data-age="29"><div class="player-name">D.J. Wonnum</div><div class="player-team">Panthers ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Commanders" data-age="37"><div class="player-name">Von Miller</div><div class="player-team">Commanders ‚Ä¢ 37</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Saints" data-age="37"><div class="player-name">Cameron Jordan</div><div class="player-team">Saints ‚Ä¢ 37</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Chargers" data-age="28"><div class="player-name">Odafe Oweh</div><div class="player-team">Chargers ‚Ä¢ 28</div><div class="player-cap">Click to set $</div></div>
                        </div>
                    </div>

                    <!-- IDL Tab Content -->
                    <div class="fa-tab-content" data-tab-content="IDL" style="display: none;">
                        <div class="player-slots fa-grid" data-position="POOL-IDL" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                            <div class="player-card fa-card" data-team="Falcons" data-age="34"><div class="player-name">David Onyemata</div><div class="player-team">Falcons ‚Ä¢ 34</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Lions" data-age="32"><div class="player-name">D.J. Reader</div><div class="player-team">Lions ‚Ä¢ 32</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Cardinals" data-age="30"><div class="player-name">Justin Jones</div><div class="player-team">Cardinals ‚Ä¢ 30</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Ravens" data-age="29"><div class="player-name">Dre'Mont Jones</div><div class="player-team">Ravens ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Bills" data-age="35"><div class="player-name">DaQuan Jones</div><div class="player-team">Bills ‚Ä¢ 35</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Broncos" data-age="30"><div class="player-name">John Franklin-Myers</div><div class="player-team">Broncos ‚Ä¢ 30</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Bills" data-age="32"><div class="player-name">Larry Ogunjobi</div><div class="player-team">Bills ‚Ä¢ 32</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Titans" data-age="31"><div class="player-name">Sebastian Joseph-Day</div><div class="player-team">Titans ‚Ä¢ 31</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Cardinals" data-age="40"><div class="player-name">Calais Campbell</div><div class="player-team">Cardinals ‚Ä¢ 40</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Texans" data-age="32"><div class="player-name">Sheldon Rankins</div><div class="player-team">Texans ‚Ä¢ 32</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Chargers" data-age="29"><div class="player-name">Teair Tart</div><div class="player-team">Chargers ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Bears" data-age="31"><div class="player-name">Andrew Billings</div><div class="player-team">Bears ‚Ä¢ 31</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Giants" data-age="33"><div class="player-name">Rakeem Nunez-Roches</div><div class="player-team">Giants ‚Ä¢ 33</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Lions" data-age="29"><div class="player-name">Roy Lopez</div><div class="player-team">Lions ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="49ers" data-age="29"><div class="player-name">Jordan Elliott</div><div class="player-team">49ers ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                        </div>
                    </div>

                    <!-- S Tab Content -->
                    <div class="fa-tab-content" data-tab-content="S" style="display: none;">
                        <div class="player-slots fa-grid" data-position="POOL-S" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                            <div class="player-card fa-card" data-team="Seahawks" data-age="25"><div class="player-name">A.J. Finley</div><div class="player-team">Seahawks ‚Ä¢ 25</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Ravens" data-age="29"><div class="player-name">Alohi Gilman</div><div class="player-team">Ravens ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Jets" data-age="26"><div class="player-name">Andre Cisco</div><div class="player-team">Jets ‚Ä¢ 26</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Jaguars" data-age="30"><div class="player-name">Andrew Wingard</div><div class="player-team">Jaguars ‚Ä¢ 30</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Ravens" data-age="27"><div class="player-name">Ar'Darius Washington</div><div class="player-team">Ravens ‚Ä¢ 27</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Dolphins" data-age="30"><div class="player-name">Ashtyn Davis</div><div class="player-team">Dolphins ‚Ä¢ 30</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Texans" data-age="26"><div class="player-name">Brandon Hill</div><div class="player-team">Texans ‚Ä¢ 26</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Chiefs" data-age="27"><div class="player-name">Bryan Cook</div><div class="player-team">Chiefs ‚Ä¢ 27</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Bears" data-age="29"><div class="player-name">Chauncey Gardner-Johnson Jr.</div><div class="player-team">Bears ‚Ä¢ 29</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Buccaneers" data-age="26"><div class="player-name">Christian Izien</div><div class="player-team">Buccaneers ‚Ä¢ 26</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Steelers" data-age="31"><div class="player-name">Chuck Clark</div><div class="player-team">Steelers ‚Ä¢ 31</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Panthers" data-age="30"><div class="player-name">D'Anthony Bell</div><div class="player-team">Panthers ‚Ä¢ 30</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Bills" data-age="28"><div class="player-name">Damar Hamlin</div><div class="player-team">Bills ‚Ä¢ 28</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Giants" data-age="26"><div class="player-name">Dane Belton</div><div class="player-team">Giants ‚Ä¢ 26</div><div class="player-cap">Click to set $</div></div>
                            <div class="player-card fa-card" data-team="Lions" data-age="28"><div class="player-name">Daniel Thomas</div><div class="player-team">Lions ‚Ä¢ 28</div><div class="player-cap">Click to set $</div></div>
                        </div>
                    </div>
                </div>

                <!-- Contract Input Modal -->
                <div id="contract-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center;">
                    <div style="background: white; padding: 30px; border-radius: 15px; max-width: 400px; width: 90%; text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.3);">
                        <h3 id="modal-title" style="color: #0080C6; margin-bottom: 10px;">Set Contract Amount</h3>
                        <p id="modal-player-name" style="font-size: 1.2em; font-weight: bold; margin-bottom: 5px;"></p>
                        <p id="modal-player-team" style="color: #666; margin-bottom: 20px;"></p>
                        <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 20px;">
                            <span style="font-size: 1.5em; font-weight: bold;">$</span>
                            <input type="number" id="contract-amount" placeholder="e.g. 15" style="padding: 12px; font-size: 1.2em; border: 2px solid #0080C6; border-radius: 8px; width: 120px; text-align: center;" min="0.1" step="0.1">
                            <span style="font-size: 1.2em; font-weight: bold;">M</span>
                        </div>
                        <div style="display: flex; gap: 10px; justify-content: center;">
                            <button id="modal-cancel" style="padding: 12px 25px; background: #e0e0e0; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Cancel</button>
                            <button id="modal-confirm" style="padding: 12px 25px; background: #0080C6; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Set Contract</button>
                        </div>
                    </div>
                </div>

                <!-- Custom Player Modal -->
                <div id="custom-player-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center;">
                    <div style="background: white; padding: 30px; border-radius: 15px; max-width: 450px; width: 90%; text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.3);">
                        <h3 style="color: #28a745; margin-bottom: 20px;">Add Custom Player</h3>
                        <div style="display: flex; flex-direction: column; gap: 15px; margin-bottom: 20px;">
                            <input type="text" id="custom-player-name" placeholder="Player Name" style="padding: 12px; font-size: 1em; border: 2px solid #28a745; border-radius: 8px; text-align: center;">
                            <div style="display: flex; gap: 10px;">
                                <input type="number" id="custom-player-age" placeholder="Age" style="padding: 12px; font-size: 1em; border: 2px solid #28a745; border-radius: 8px; width: 80px; text-align: center;" min="20" max="45">
                                <select id="custom-player-position" style="padding: 12px; font-size: 1em; border: 2px solid #28a745; border-radius: 8px; flex: 1; cursor: pointer;">
                                    <option value="">Select Position</option>
                                    <option value="TE">TE - Tight End</option>
                                    <option value="LG">LG - Left Guard</option>
                                    <option value="C">C - Center</option>
                                    <option value="RG">RG - Right Guard</option>
                                    <option value="EDGE">EDGE - Edge Rusher</option>
                                    <option value="IDL">IDL - Interior DL</option>
                                    <option value="S">S - Safety</option>
                                </select>
                            </div>
                            <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                                <span style="font-size: 1.2em; font-weight: bold;">$</span>
                                <input type="number" id="custom-player-contract" placeholder="Contract (e.g. 15)" style="padding: 12px; font-size: 1em; border: 2px solid #28a745; border-radius: 8px; width: 120px; text-align: center;" min="0.1" step="0.1">
                                <span style="font-size: 1em; font-weight: bold;">M</span>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px; justify-content: center;">
                            <button id="custom-player-cancel" style="padding: 12px 25px; background: #e0e0e0; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Cancel</button>
                            <button id="custom-player-confirm" style="padding: 12px 25px; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Add Player</button>
                        </div>
                    </div>
                </div>
            </div>

            <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #0080C6;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <strong>üí° How to use:</strong> Drag any player card between positions or to/from the Player Pool on the right. Players marked with a red border are identified cut candidates.
                        <div style="margin-top: 10px; color: #28a745; font-weight: 600;">
                            ‚úì Your changes are automatically saved!
                        </div>
                    </div>
                    <button onclick="resetDepthChart()" style="padding: 10px 20px; background: #dc3545; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600; transition: background 0.2s;">
                        Reset to Default
                    </button>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üìù Notes</h2>
            <ul style="line-height: 1.8; color: #666;">
                <li><strong>Dead Money:</strong> The cap charge that remains even after cutting a player due to guaranteed money</li>
                <li><strong>Cap Savings:</strong> The actual amount freed up in cap space (Cap Hit - Dead Money)</li>
                <li><strong>Mekhi Becton</strong> provides the most significant savings at $9.7M</li>
                <li><strong>Bradley Bozeman</strong> offers $5.875M in savings</li>
                <li><strong>Will Dissly</strong> provides $4M in cap relief</li>
                <li><strong>Bud Dupree</strong> adds $3.49M in savings</li>
                <li>Cutting all four players would free up <strong>$23.065M</strong> in cap space</li>
                <li>Data source: <a href="https://overthecap.com/salary-cap/los-angeles-chargers" target="_blank" style="color: #0080C6;">Over The Cap</a></li>
            </ul>
        </div>
    </div>

    <script>
        // Drag and Drop functionality with localStorage
        let draggedElement = null;
        let sourcePosition = null;
        let capAdjustment = 0;
        const BASE_CAP = 80.6; // Base cap space in millions

        // Parse cap value from string like "$12.2M" to number
        function parseCapValue(capString) {
            return parseFloat(capString.replace('$', '').replace('M', ''));
        }

        // Format number to cap string
        function formatCapValue(value) {
            const sign = value >= 0 ? '+' : '';
            return sign + '$' + value.toFixed(1) + 'M';
        }

        // Update the cap tracker display
        function updateCapDisplay() {
            const adjustmentEl = document.getElementById('cap-adjustment');
            const availableEl = document.getElementById('available-cap');

            const available = BASE_CAP + capAdjustment;

            adjustmentEl.textContent = formatCapValue(capAdjustment);
            adjustmentEl.style.color = capAdjustment >= 0 ? '#90EE90' : '#FFB6C1';

            availableEl.textContent = '$' + available.toFixed(1) + 'M';
            availableEl.style.color = available >= BASE_CAP ? '#FFD700' : '#FFB6C1';
        }

        // Check if a position is in the player pool (not on active roster)
        function isPoolPosition(position) {
            return position && position.startsWith('POOL-');
        }

        // Save current state to localStorage
        function saveDepthChart() {
            const state = {};
            document.querySelectorAll('.player-slots').forEach(slot => {
                const position = slot.getAttribute('data-position');
                const players = [];
                slot.querySelectorAll('.player-card').forEach(card => {
                    const teamEl = card.querySelector('.player-team');
                    players.push({
                        name: card.querySelector('.player-name').textContent,
                        cap: card.querySelector('.player-cap').textContent,
                        isCut: card.classList.contains('cut-player'),
                        isFreeAgent: card.classList.contains('fa-card'),
                        hasContract: card.classList.contains('contract-set'),
                        team: teamEl ? teamEl.textContent : (card.getAttribute('data-team') || ''),
                        savings: card.getAttribute('data-savings') || null
                    });
                });
                state[position] = players;
            });
            localStorage.setItem('chargersDepthChart', JSON.stringify(state));
            localStorage.setItem('chargersCapAdjustment', capAdjustment.toString());
            console.log('Depth chart saved!');
        }

        // Load saved state from localStorage
        function loadDepthChart() {
            // Load cap adjustment
            const savedCapAdjustment = localStorage.getItem('chargersCapAdjustment');
            if (savedCapAdjustment) {
                capAdjustment = parseFloat(savedCapAdjustment);
                updateCapDisplay();
            }

            const savedState = localStorage.getItem('chargersDepthChart');
            if (!savedState) return;

            const state = JSON.parse(savedState);

            // Clear all current slots
            document.querySelectorAll('.player-slots').forEach(slot => {
                slot.innerHTML = '';
            });

            // Restore players to saved positions
            Object.keys(state).forEach(position => {
                const slot = document.querySelector(`[data-position="${position}"]`);
                if (!slot) return;

                state[position].forEach(playerData => {
                    const card = document.createElement('div');
                    let classes = 'player-card';
                    if (playerData.isCut) classes += ' cut-player';
                    if (playerData.isFreeAgent) classes += ' fa-card';
                    if (playerData.hasContract) classes += ' contract-set';
                    card.className = classes;

                    // Restore savings attribute for cut candidates
                    if (playerData.savings) {
                        card.setAttribute('data-savings', playerData.savings);
                    }

                    // Only make draggable if not an FA without contract
                    if (!playerData.isFreeAgent || playerData.hasContract) {
                        card.draggable = true;
                    }

                    // Build HTML based on whether it's a free agent
                    if (playerData.isFreeAgent && playerData.team) {
                        card.setAttribute('data-team', playerData.team);
                        card.innerHTML = `
                            <div class="player-name">${playerData.name}</div>
                            <div class="player-team">${playerData.team}</div>
                            <div class="player-cap">${playerData.cap}</div>
                        `;
                    } else {
                        card.innerHTML = `
                            <div class="player-name">${playerData.name}</div>
                            <div class="player-cap">${playerData.cap}</div>
                        `;
                    }

                    // Add drag event listeners to restored cards (if draggable)
                    if (!playerData.isFreeAgent || playerData.hasContract) {
                        card.addEventListener('dragstart', function(e) {
                            draggedElement = this;
                            sourcePosition = this.closest('.player-slots').getAttribute('data-position');
                            this.style.opacity = '0.5';
                        });

                        card.addEventListener('dragend', function(e) {
                            this.style.opacity = '1';
                            sourcePosition = null;
                        });
                    }

                    // Add click handler for FA cards without contracts
                    if (playerData.isFreeAgent && !playerData.hasContract) {
                        card.addEventListener('click', function(e) {
                            if (this.classList.contains('contract-set')) return;
                            openContractModal(this, false);
                        });
                    }

                    // Add double-click handler for FA cards with contracts (to edit)
                    if (playerData.isFreeAgent && playerData.hasContract) {
                        card.addEventListener('dblclick', function(e) {
                            if (this.classList.contains('contract-set')) {
                                e.preventDefault();
                                e.stopPropagation();
                                openContractModal(this, true);
                            }
                        });
                    }

                    slot.appendChild(card);
                });
            });
            console.log('Depth chart loaded!');
        }

        // Initialize drag and drop
        document.querySelectorAll('.player-card').forEach(card => {
            card.addEventListener('dragstart', function(e) {
                draggedElement = this;
                sourcePosition = this.closest('.player-slots').getAttribute('data-position');
                this.style.opacity = '0.5';
            });

            card.addEventListener('dragend', function(e) {
                this.style.opacity = '1';
                sourcePosition = null;
            });
        });

        document.querySelectorAll('.player-slots').forEach(slot => {
            slot.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.style.background = '#e3f2fd';
            });

            slot.addEventListener('dragleave', function(e) {
                this.style.background = '';
            });

            slot.addEventListener('drop', function(e) {
                e.preventDefault();
                this.style.background = '';

                if (draggedElement) {
                    const destPosition = this.getAttribute('data-position');
                    const capValue = parseCapValue(draggedElement.querySelector('.player-cap').textContent);

                    // For cut candidates, use savings value instead of cap value
                    const isCutPlayer = draggedElement.classList.contains('cut-player');
                    const savingsValue = draggedElement.getAttribute('data-savings');
                    const adjustmentValue = (isCutPlayer && savingsValue) ? parseFloat(savingsValue) : capValue;

                    // Calculate cap adjustment based on movement
                    const fromPool = isPoolPosition(sourcePosition);
                    const toPool = isPoolPosition(destPosition);

                    if (fromPool && !toPool) {
                        // Moving FROM pool TO depth chart = signing player, subtract cap
                        // For cut players returning, subtract their savings value
                        capAdjustment -= adjustmentValue;
                    } else if (!fromPool && toPool) {
                        // Moving FROM depth chart TO pool = releasing/cutting player, add savings
                        capAdjustment += adjustmentValue;
                    }
                    // If moving within same area (pool to pool or depth to depth), no cap change

                    this.appendChild(draggedElement);
                    updateCapDisplay();
                    saveDepthChart(); // Save after each drop
                }
            });
        });

        // Load saved state on page load
        window.addEventListener('load', function() {
            loadDepthChart();
        });

        // Add reset button functionality
        function resetDepthChart() {
            if (confirm('Are you sure you want to reset the depth chart to default?')) {
                localStorage.removeItem('chargersDepthChart');
                localStorage.removeItem('chargersCapAdjustment');
                location.reload();
            }
        }

        // ========== FREE AGENT TAB SWITCHING ==========
        document.querySelectorAll('.fa-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // Remove active from all tabs
                document.querySelectorAll('.fa-tab').forEach(t => {
                    t.classList.remove('active');
                    t.style.background = '#e0e0e0';
                    t.style.color = '#333';
                });

                // Hide all tab contents
                document.querySelectorAll('.fa-tab-content').forEach(c => {
                    c.style.display = 'none';
                    c.classList.remove('active');
                });

                // Activate clicked tab
                this.classList.add('active');
                this.style.background = '#0080C6';
                this.style.color = 'white';

                // Show corresponding content
                const tabName = this.getAttribute('data-tab');
                const content = document.querySelector(`[data-tab-content="${tabName}"]`);
                if (content) {
                    content.style.display = 'block';
                    content.classList.add('active');
                }
            });
        });

        // ========== CONTRACT MODAL FUNCTIONALITY ==========
        let selectedFACard = null;
        let isEditingContract = false;
        const modal = document.getElementById('contract-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalPlayerName = document.getElementById('modal-player-name');
        const modalPlayerTeam = document.getElementById('modal-player-team');
        const contractInput = document.getElementById('contract-amount');
        const modalCancel = document.getElementById('modal-cancel');
        const modalConfirm = document.getElementById('modal-confirm');

        // Function to open contract modal (for both setting and editing)
        function openContractModal(card, isEdit = false) {
            selectedFACard = card;
            isEditingContract = isEdit;
            const playerName = card.querySelector('.player-name').textContent;
            const playerTeam = card.querySelector('.player-team')?.textContent || card.getAttribute('data-team') || '';

            modalTitle.textContent = isEdit ? 'Edit Contract' : 'Set Contract Amount';
            modalPlayerName.textContent = playerName;
            modalPlayerTeam.textContent = 'Former Team: ' + playerTeam;

            // Pre-fill current value if editing
            if (isEdit) {
                const currentCap = card.querySelector('.player-cap').textContent;
                const currentValue = parseCapValue(currentCap);
                contractInput.value = currentValue;
            } else {
                contractInput.value = '';
            }

            modal.style.display = 'flex';
            contractInput.focus();
            contractInput.select();
        }

        // Handle clicking on FA cards (single click for new, double click for edit)
        document.querySelectorAll('.fa-card').forEach(card => {
            card.addEventListener('click', function(e) {
                // If already has contract set, ignore single clicks (use double-click to edit)
                if (this.classList.contains('contract-set')) {
                    return;
                }
                openContractModal(this, false);
            });

            // Double-click to edit existing contracts
            card.addEventListener('dblclick', function(e) {
                if (this.classList.contains('contract-set')) {
                    e.preventDefault();
                    e.stopPropagation();
                    openContractModal(this, true);
                }
            });
        });

        // Cancel modal
        modalCancel.addEventListener('click', function() {
            modal.style.display = 'none';
            selectedFACard = null;
            isEditingContract = false;
        });

        // Close modal on outside click
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                modal.style.display = 'none';
                selectedFACard = null;
                isEditingContract = false;
            }
        });

        // Confirm contract
        modalConfirm.addEventListener('click', function() {
            const amount = parseFloat(contractInput.value);
            if (isNaN(amount) || amount <= 0) {
                alert('Please enter a valid contract amount');
                return;
            }

            if (selectedFACard) {
                // Update the card with contract
                const capEl = selectedFACard.querySelector('.player-cap');
                capEl.textContent = '$' + amount.toFixed(1) + 'M';

                // Only set up draggable if this is a new contract (not editing)
                if (!isEditingContract) {
                    // Mark as contract set and make draggable
                    selectedFACard.classList.add('contract-set');
                    selectedFACard.setAttribute('draggable', 'true');

                    // Add drag event listeners
                    selectedFACard.addEventListener('dragstart', function(e) {
                        draggedElement = this;
                        sourcePosition = this.closest('.player-slots').getAttribute('data-position');
                        this.style.opacity = '0.5';
                    });

                    selectedFACard.addEventListener('dragend', function(e) {
                        this.style.opacity = '1';
                        sourcePosition = null;
                    });
                }

                // Save state
                saveDepthChart();
            }

            modal.style.display = 'none';
            selectedFACard = null;
            isEditingContract = false;
        });

        // Handle Enter key in contract input
        contractInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                modalConfirm.click();
            }
        });

        // ========== INITIALIZE FA CARDS ==========
        // Make FA cards with existing contracts draggable
        document.querySelectorAll('.fa-card.contract-set').forEach(card => {
            card.setAttribute('draggable', 'true');
            card.addEventListener('dragstart', function(e) {
                draggedElement = this;
                sourcePosition = this.closest('.player-slots').getAttribute('data-position');
                this.style.opacity = '0.5';
            });

            card.addEventListener('dragend', function(e) {
                this.style.opacity = '1';
                sourcePosition = null;
            });
        });

        // ========== CUSTOM PLAYER MODAL FUNCTIONALITY ==========
        const customPlayerModal = document.getElementById('custom-player-modal');
        const customPlayerBtn = document.getElementById('add-custom-player-btn');
        const customPlayerName = document.getElementById('custom-player-name');
        const customPlayerAge = document.getElementById('custom-player-age');
        const customPlayerPosition = document.getElementById('custom-player-position');
        const customPlayerContract = document.getElementById('custom-player-contract');
        const customPlayerCancel = document.getElementById('custom-player-cancel');
        const customPlayerConfirm = document.getElementById('custom-player-confirm');

        // Open custom player modal
        customPlayerBtn.addEventListener('click', function() {
            customPlayerName.value = '';
            customPlayerAge.value = '';
            customPlayerPosition.value = '';
            customPlayerContract.value = '';
            customPlayerModal.style.display = 'flex';
            customPlayerName.focus();
        });

        // Cancel custom player modal
        customPlayerCancel.addEventListener('click', function() {
            customPlayerModal.style.display = 'none';
        });

        // Close on outside click
        customPlayerModal.addEventListener('click', function(e) {
            if (e.target === customPlayerModal) {
                customPlayerModal.style.display = 'none';
            }
        });

        // Confirm custom player
        customPlayerConfirm.addEventListener('click', function() {
            const name = customPlayerName.value.trim();
            const age = parseInt(customPlayerAge.value);
            const position = customPlayerPosition.value;
            const contract = parseFloat(customPlayerContract.value);

            if (!name) {
                alert('Please enter a player name');
                return;
            }
            if (isNaN(age) || age < 20 || age > 45) {
                alert('Please enter a valid age (20-45)');
                return;
            }
            if (!position) {
                alert('Please select a position');
                return;
            }
            if (isNaN(contract) || contract <= 0) {
                alert('Please enter a valid contract amount');
                return;
            }

            // Create the new player card
            const card = document.createElement('div');
            card.className = 'player-card fa-card contract-set';
            card.setAttribute('data-team', 'Custom');
            card.setAttribute('data-age', age);
            card.setAttribute('draggable', 'true');
            card.innerHTML = `
                <div class="player-name">${name}</div>
                <div class="player-team">Custom ‚Ä¢ ${age}</div>
                <div class="player-cap">$${contract.toFixed(1)}M</div>
            `;

            // Add drag event listeners
            card.addEventListener('dragstart', function(e) {
                draggedElement = this;
                sourcePosition = this.closest('.player-slots').getAttribute('data-position');
                this.style.opacity = '0.5';
            });

            card.addEventListener('dragend', function(e) {
                this.style.opacity = '1';
                sourcePosition = null;
            });

            // Add double-click to edit
            card.addEventListener('dblclick', function(e) {
                if (this.classList.contains('contract-set')) {
                    e.preventDefault();
                    e.stopPropagation();
                    openContractModal(this, true);
                }
            });

            // Find the correct tab content and add the card
            const tabContent = document.querySelector(`[data-tab-content="${position}"]`);
            if (tabContent) {
                const grid = tabContent.querySelector('.fa-grid');
                if (grid) {
                    grid.appendChild(card);
                }
            }

            // Save state
            saveDepthChart();

            // Close modal
            customPlayerModal.style.display = 'none';

            // Switch to that tab
            document.querySelector(`[data-tab="${position}"]`)?.click();
        });

        // Handle Enter key in custom player modal
        customPlayerContract.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                customPlayerConfirm.click();
            }
        });
    </script>
</body>
</html>
